<!DOCTYPE html>
<html>
  <title>NGMC SMART TICKETING SYSTEM</title>
<head>

    <title>Create Ticket</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
<div class="container">

    <h2>Create New Ticket</h2>

    <div class="ticket-dashboard">
        <div class="dashboard-card">
            <span>{{ total }}</span>
            Total
        </div>
        <div class="dashboard-card">
            <span>{{ in_process }}</span>
            In Process
        </div>
        <div class="dashboard-card">
            <span>{{ solved }}</span>
            Solved
        </div>
    </div>

    <div class="ticket-form">
        <form action="{{ url_for('create_ticket') }}" method="post" enctype="multipart/form-data">
            <label>Department:</label>
            <select name="department" required>
                <option value="" disabled selected>Select Department</option>
                {% for dept in departments %}
                    <option value="{{ dept }}">{{ dept }}</option>
                {% endfor %}
            </select>
            
            <label>Title:</label>
            <input type="text" name="system" required>
            
            <label>Problem Description:</label>
            <textarea name="problem" required></textarea>
            
            <label>Your Email:</label>
            <input type="email" name="email" required>
            
            <label>Severity:</label>
            <select name="severity" required>
                <option value="Low">Low</option>
                <option value="Medium">Medium</option>
                <option value="High">High</option>
                <option value="Critical">Critical</option>
            </select>
            
            <label>Attach Image (optional):</label>
            <input type="file" accept="image/*" capture="environment" name="image">
            
            <button type="submit">Submit Ticket</button>
        </form>
        <a href="{{ url_for('admin_login') }}" style="float:right; margin-top: 10px;">Admin Login</a>
    </div>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul>
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

</div>
</body>
</html>
